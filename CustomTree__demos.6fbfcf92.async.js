(self.webpackChunkmarkdown=self.webpackChunkmarkdown||[]).push([[2391],{68956:function(t,u,r){"use strict";r.r(u),r.d(u,{default:function(){return R}});var C=r(19632),v=r.n(C),y=r(5574),T=r.n(y),h=r(67294),k={tree:"tree___ujHmY"},I={card:"card___pkMZo"},l=r(85893);function D(m){var N=m.treeData,f=m.treeFirst,p=m.addChildNode,j=m.delChildNode,b=(0,h.useState)([]),g=T()(b,2),x=g[0],A=g[1];function S(e,n,c){A(function(s){return s.filter(function(d){return d.key!==e.key})})}function a(e,n){f&&A(function(c){var s=c.map(function(d){if(d.key===e.key)if(d.child instanceof Array){var M=d.child[d.child.length],Y=M?{key:Math.random()*1e6,name:"".concat(M.name," ").concat(d.child.length+1),child:[]}:{key:Math.random()*1e6,name:"".concat(d.child.length+1),child:[]};d.child.push(Y)}else d.child=[{key:Math.random()*1e6,name:"".concat(n+1),child:{}}];return d});return s})}var o=j||S,i=p||a;return(0,h.useEffect)(function(){A(N)},[N]),(0,l.jsx)("div",{className:I.card,children:(0,l.jsx)("ul",{children:x.map(function(e,n){return(0,l.jsxs)("li",{children:[(0,l.jsx)("div",{className:"item ".concat(n!==0?"line-left":""," ").concat(n!==x.length-1?"line-right":""),children:(0,l.jsxs)("div",{className:"item-name ".concat(e.child&&e.child.length>0?"line-bottom":""," ").concat(f?"":"line-top"),children:[!f&&(0,l.jsx)("div",{className:"reduce",onClick:function(){o(e,n)},children:"-"}),(0,l.jsx)("div",{children:e.name}),(0,l.jsx)("div",{className:"plus",onClick:function(){i(e,n)},children:"+"})]})}),e.child&&e.child.length>0&&(0,l.jsx)(D,{treeData:e.child,addChildNode:p,delChildNode:j})]},e.key)})})})}function R(){var m=(0,h.useState)([{name:"1",key:"1",child:[{name:"2",key:"1-1",child:[{name:"1",key:"1-1-1"},{name:"2",key:"1-1-2"}]},{name:"1",key:"1-2",child:[{name:"1",key:"1-2-1"},{name:"2",key:"1-2-2"}]}]}]),N=T()(m,2),f=N[0],p=N[1],j=(0,h.useRef)(),b=(0,h.useRef)();function g(a){a.stopPropagation();var o=a.currentTarget,i=a.clientX-o.offsetLeft,e=a.clientY-o.offsetTop;document.onmousemove=function(n){var c=n.clientX-i,s=n.clientY-e;j.current=s,b.current=c,o.style.left=c+"px",o.style.top=s+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}function x(a,o,i){for(var e=0;e<a.length;e++){var n=a[e];if(n.key===o){if(i)a.splice(e,1);else{var c,s;!(n.child instanceof Array)&&(a[e].child=[]),a[e].child.push({name:1+ +((c=(s=n.child[n.child.length-1])===null||s===void 0?void 0:s.name)!==null&&c!==void 0?c:0),key:Math.random()*1e5,child:[]})}break}n.key!==o&&n.child&&n.child.length&&(a[e].child=x(n.child,o,i))}return a}function A(a){var o=f;p(function(i){var e=x(i,a.key);return v()(e)})}function S(a){p(function(o){var i=x(o,a.key,"del");return v()(i)})}return(0,h.useEffect)(function(){console.log(f)},[f]),(0,l.jsx)("div",{className:k.tree,children:(0,l.jsx)("div",{className:"tree-content",onMouseDown:g,children:(0,l.jsx)(D,{treeData:f,treeFirst:!0,addChildNode:A,delChildNode:S})})})}},96446:function(t,u,r){var C=r(37923);function v(y){if(Array.isArray(y))return C(y)}t.exports=v,t.exports.__esModule=!0,t.exports.default=t.exports},96936:function(t){function u(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},88619:function(t){function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},19632:function(t,u,r){var C=r(96446),v=r(96936),y=r(96263),T=r(88619);function h(k){return C(k)||v(k)||y(k)||T()}t.exports=h,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
